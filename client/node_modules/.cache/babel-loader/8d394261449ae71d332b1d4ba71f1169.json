{"ast":null,"code":"import { takeLatest, put, all, call } from 'redux-saga/effects';\nimport { ACTION_TYPES } from '../action-types';\nimport { auth, provider, createUserProfileDoc } from '../../firebase/utils';\nimport { googleSignInSuccess, googleSignInFailure, emailSignInFailure, emailSignInSuccess } from './user-actions'; // Google Sign In------------------------------------------\n\nfunction* onGoogleSignInStart() {\n  yield takeLatest(ACTION_TYPES.GOOGLE_SIGN_IN_START, signInWithGoogle);\n}\n\nfunction* signInWithGoogle() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(provider);\n    const userRef = yield call(createUserProfileDoc, user);\n    const userSnapshot = yield userRef.get();\n    yield put(googleSignInSuccess({\n      id: userSnapshot.id,\n      ...userSnapshot.data()\n    }));\n  } catch (error) {\n    yield put(googleSignInFailure(error));\n  }\n} // User Sign In------------------------------------------\n\n\nfunction* onEmailSignInStart() {\n  yield takeLatest(ACTION_TYPES.EMAIL_SIGN_IN_START, signInWithEmail);\n}\n\nfunction* signInWithEmail(action) {\n  try {\n    const {\n      email,\n      password\n    } = action.payload;\n    const {\n      user\n    } = yield auth.signInWithEmailAndPassword(email, password);\n    const userRef = yield call(createUserProfileDoc, user);\n    const userSnapshot = yield userRef.get();\n    yield put(emailSignInSuccess({\n      id: userSnapshot.id,\n      ...userSnapshot.data()\n    }));\n  } catch (error) {\n    yield put(emailSignInFailure);\n  }\n}\n\nexport function* userSagas() {\n  yield all([call(onGoogleSignInStart), call(onEmailSignInStart)]);\n}","map":{"version":3,"sources":["/Users/jasoncarrillo/Documents/Coding/React Projects/crwn-clothing/src/redux/user/user.sagas.js"],"names":["takeLatest","put","all","call","ACTION_TYPES","auth","provider","createUserProfileDoc","googleSignInSuccess","googleSignInFailure","emailSignInFailure","emailSignInSuccess","onGoogleSignInStart","GOOGLE_SIGN_IN_START","signInWithGoogle","user","signInWithPopup","userRef","userSnapshot","get","id","data","error","onEmailSignInStart","EMAIL_SIGN_IN_START","signInWithEmail","action","email","password","payload","signInWithEmailAndPassword","userSagas"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,GAA1B,EAA+BC,IAA/B,QAA2C,oBAA3C;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,oBAAzB,QAAqD,sBAArD;AACA,SAASC,mBAAT,EACIC,mBADJ,EAEIC,kBAFJ,EAGIC,kBAHJ,QAIQ,gBAJR,C,CAOA;;AACA,UAAUC,mBAAV,GAAgC;AAC5B,QAAMZ,UAAU,CACZI,YAAY,CAACS,oBADD,EAEZC,gBAFY,CAAhB;AAIH;;AACD,UAAUA,gBAAV,GAA6B;AACzB,MAAI;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMV,IAAI,CAACW,eAAL,CAAqBV,QAArB,CAAvB;AACA,UAAMW,OAAO,GAAG,MAAMd,IAAI,CAACI,oBAAD,EAAuBQ,IAAvB,CAA1B;AACA,UAAMG,YAAY,GAAG,MAAMD,OAAO,CAACE,GAAR,EAA3B;AACA,UAAMlB,GAAG,CACLO,mBAAmB,CAAC;AAACY,MAAAA,EAAE,EAAEF,YAAY,CAACE,EAAlB;AAAsB,SAAGF,YAAY,CAACG,IAAb;AAAzB,KAAD,CADd,CAAT;AAGH,GAPD,CAOE,OAAMC,KAAN,EAAa;AACX,UAAMrB,GAAG,CAACQ,mBAAmB,CAACa,KAAD,CAApB,CAAT;AACH;AACJ,C,CAID;;;AACA,UAAUC,kBAAV,GAA+B;AAC3B,QAAMvB,UAAU,CACZI,YAAY,CAACoB,mBADD,EAEZC,eAFY,CAAhB;AAIH;;AACD,UAAUA,eAAV,CAA0BC,MAA1B,EAAkC;AAC9B,MAAI;AACA,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAsBF,MAAM,CAACG,OAAnC;AACA,UAAM;AAAEd,MAAAA;AAAF,QAAgB,MAAMV,IAAI,CAACyB,0BAAL,CAAgCH,KAAhC,EAAuCC,QAAvC,CAA5B;AACA,UAAMX,OAAO,GAAQ,MAAMd,IAAI,CAACI,oBAAD,EAAuBQ,IAAvB,CAA/B;AACA,UAAMG,YAAY,GAAG,MAAMD,OAAO,CAACE,GAAR,EAA3B;AACA,UAAMlB,GAAG,CACLU,kBAAkB,CAAC;AAACS,MAAAA,EAAE,EAAEF,YAAY,CAACE,EAAlB;AAAsB,SAAGF,YAAY,CAACG,IAAb;AAAzB,KAAD,CADb,CAAT;AAGH,GARD,CAQE,OAAOC,KAAP,EAAc;AACZ,UAAMrB,GAAG,CAACS,kBAAD,CAAT;AACH;AACJ;;AAID,OAAO,UAAUqB,SAAV,GAAsB;AACzB,QAAM7B,GAAG,CAAC,CACNC,IAAI,CAACS,mBAAD,CADE,EAENT,IAAI,CAACoB,kBAAD,CAFE,CAAD,CAAT;AAIH","sourcesContent":["import { takeLatest, put, all, call } from 'redux-saga/effects';\nimport { ACTION_TYPES } from '../action-types';\nimport { auth, provider, createUserProfileDoc } from '../../firebase/utils';\nimport { googleSignInSuccess, \n    googleSignInFailure, \n    emailSignInFailure,\n    emailSignInSuccess\n } from './user-actions';\n\n\n// Google Sign In------------------------------------------\nfunction* onGoogleSignInStart() {\n    yield takeLatest(\n        ACTION_TYPES.GOOGLE_SIGN_IN_START,\n        signInWithGoogle\n    );\n}\nfunction* signInWithGoogle() {\n    try {\n        const { user } = yield auth.signInWithPopup(provider);\n        const userRef = yield call(createUserProfileDoc, user);\n        const userSnapshot = yield userRef.get();\n        yield put(\n            googleSignInSuccess({id: userSnapshot.id, ...userSnapshot.data()})\n        )\n    } catch(error) {\n        yield put(googleSignInFailure(error));\n    }\n}\n\n\n\n// User Sign In------------------------------------------\nfunction* onEmailSignInStart() {\n    yield takeLatest(\n        ACTION_TYPES.EMAIL_SIGN_IN_START,\n        signInWithEmail\n    )\n}\nfunction* signInWithEmail(action) {\n    try {\n        const { email, password } = action.payload;\n        const { user }     =  yield auth.signInWithEmailAndPassword(email, password);\n        const userRef      = yield call(createUserProfileDoc, user);\n        const userSnapshot = yield userRef.get();\n        yield put(\n            emailSignInSuccess({id: userSnapshot.id, ...userSnapshot.data()})\n        )\n    } catch (error) {\n        yield put(emailSignInFailure)\n    }\n}\n\n\n\nexport function* userSagas() {\n    yield all([\n        call(onGoogleSignInStart),\n        call(onEmailSignInStart)\n    ]);\n}"]},"metadata":{},"sourceType":"module"}